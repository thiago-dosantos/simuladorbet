<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NhoNhoNhaBet - Simulador de Apostas</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ff6b6b;
            --secondary: #48dbfb;
            --accent: #ff9ff3;
            --background: #f7f7f7;
            --card-bg: #ffffff;
            --text: #333333;
            --text-light: #666666;
            --success: #1dd1a1;
            --danger: #ff6b6b;
            --warning: #feca57;
            --info: #54a0ff;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background);
            color: var(--text);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            padding: 25px;
            text-align: center;
            position: relative;
            color: white;
        }
        
        header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .heart-icon {
            color: #ff0000;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .balance-container {
            display: flex;
            justify-content: right;
            align-items: center;
            flex-direction: column;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.7);
            border-bottom: 1px solid #eee;
            gap: 8px;
        }
        
        .balance {
            background: linear-gradient(135deg, var(--secondary), var(--info));
            color: white;
            padding: 5px 10px;
            border-radius: 30px;
            font-size: 1.4rem;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .balance::before {
            content: "💵";
            font-size: 1.5rem;
        }
        
        .add-funds {
            margin-left: 15px;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 30px;
            padding: 10px 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .add-funds:hover {
            background: #17b58a;
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(29, 209, 161, 0.3);
        }
        
        .content {
            padding: 25px;
        }
        
        .section-title {
            font-size: 1.5rem;
            margin: 25px 0 20px;
            color: var(--primary);
            position: relative;
            padding-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 3px;
            background: var(--primary);
        }
        
        .matches-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .match-card {
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid #eee;
        }
        
        .match-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .match-teams {
            padding: 20px;
            text-align: center;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-bottom: 1px solid #eee;
        }
        
        .team-name {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .vs {
            margin: 8px 0;
            color: var(--primary);
            font-weight: 700;
            font-size: 1.2rem;
        }
        
        .match-odds {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1px;
            background: #f1f1f1;
        }
        
        .odd {
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
            position: relative;
        }
        
        .odd.selected {
            background: var(--info);
            color: white;
        }
        
        .odd.selected .odd-value {
            color: white;
        }
        
        .odd.selected .odd-type {
            color: rgba(255, 255, 255, 0.9);
        }
        
        .odd:hover {
            background: var(--info);
            color: white;
            transform: scale(1.05);
        }
        
        .odd:hover .odd-value {
            color: white;
        }
        
        .odd-value {
            font-weight: 700;
            font-size: 1.3rem;
            color: var(--success);
            transition: color 0.3s;
        }
        
        .odd-type {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-top: 5px;
            transition: color 0.3s;
        }
        
        .odd:hover .odd-type {
            color: rgba(255, 255, 255, 0.9);
        }
        
        .bet-slip {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            border: 1px solid #eee;
        }
        
        .bet-items {
            min-height: 120px;
            margin-bottom: 25px;
        }
        
        .bet-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 4px solid var(--primary);
        }
        
        .bet-match {
            font-weight: 600;
        }
        
        .bet-odd {
            color: var(--primary);
            font-weight: 700;
        }
        
        .remove-bet {
            color: var(--danger);
            cursor: pointer;
            font-size: 1.3rem;
            transition: transform 0.2s;
        }
        
        .remove-bet:hover {
            transform: scale(1.2);
        }
        
        .bet-controls {
            display: flex;
            gap: 12px;
            margin-top: 25px;
        }
        
        .bet-input {
            flex: 1;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 10px;
            background: white;
            color: var(--text);
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        .bet-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1rem;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: #ff5252;
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(255, 107, 107, 0.3);
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        .btn-danger:hover {
            background: #ff4757;
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(255, 107, 107, 0.3);
        }
        
        .results {
            margin-top: 30px;
            padding: 25px;
            border-radius: 12px;
            display: none;
            animation: fadeIn 0.5s;
            text-align: center;
            font-size: 1.1rem;
        }
        
        .win-result {
            background: rgba(29, 209, 161, 0.1);
            border: 1px solid var(--success);
            color: var(--success);
        }
        
        .loss-result {
            background: rgba(255, 107, 107, 0.1);
            border: 1px solid var(--danger);
            color: var(--danger);
        }
        
        .history {
            margin-top: 40px;
        }
        
        .history-item {
            padding: 20px;
            background: white;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            border-left: 4px solid var(--info);
        }
        
        .history-date {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-bottom: 8px;
        }
        
        .history-bets {
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .history-amount {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .history-amount::before {
            content: "R$ ";
        }
        
        .history-win {
            color: var(--success);
            font-weight: 700;
        }
        
        .history-win::before {
            content: "+R$ ";
        }
        
        .history-loss {
            color: var(--danger);
            font-weight: 700;
        }
        
        .empty-message {
            text-align: center;
            color: var(--text-light);
            padding: 30px;
            font-size: 1.1rem;
        }
        
        .card-colors {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: transform 0.2s;
        }
        
        .color-option:hover {
            transform: scale(1.1);
        }
        
        .color-option.selected {
            border-color: var(--text);
        }
        
        .bet-type-selector {
            margin-bottom: 20px;
        }
        
        .bet-type-btn {
            padding: 8px 15px;
            background: #f1f1f1;
            border: none;
            border-radius: 20px;
            margin-right: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .bet-type-btn.active {
            background: var(--primary);
            color: white;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }
        
        .modal-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .modal-input {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .modal-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }
        
        .modal-btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .modal-btn-secondary {
            background: #f1f1f1;
            color: var(--text);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Responsividade */
        @media (max-width: 768px) {
            .matches-grid {
                grid-template-columns: 1fr;
            }
            
            .bet-controls {
                flex-direction: column;
            }
            
            header h1 {
                font-size: 2rem;
            }
            
            .btn {
                justify-content: center;
            }
            
            .balance-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .add-funds {
                margin-left: 0;
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>
                <span>NhoNhoNhaBet</span>
                <span class="heart-icon">❤️</span>
            </h1>
            <p>Diversão e emoção nas apostas esportivas!</p>
        </header>
        
        <div class="balance-container">
            <div class="balance">
                <span id="balance">R$ 200.00</span>
            </div>
            <button class="add-funds" id="add-funds-btn">
                <span>+</span>
                <span>Adicionar Saldo</span>
            </button>
        </div>
        
        <div class="content">
            <h2 class="section-title">
                <span>⚽</span>
                Partidas ao Vivo
            </h2>

            
            <div class="bet-type-selector">
                <button class="bet-type-btn active" data-type="result">Quem Ganhar?</button>
                <button class="bet-type-btn" data-type="goals">Total de Gols</button>
                <button class="bet-type-btn" data-type="cards">Cartões Amarelos</button>
                <button class="bet-type-btn" data-type="handicap">Pontuação</button>
            </div>
            
            <div class="matches-grid" id="matches-container">
            </div>
            
            <div class="bet-slip">
                <h2 class="section-title">
                    <span>📝</span>
                    Cupom de Apostas
                </h2>
                <div class="bet-items" id="bet-items">
                    <div class="empty-message">Selecione suas apostas acima</div>
                </div>
                
                <div class="bet-controls">
                    <input type="number" id="bet-amount" class="bet-input" placeholder="Valor da aposta (R$)" min="1">
                    <button class="btn btn-primary" id="place-bet">
                        <span>🎯 Apostar</span>
                    </button>
                    <button class="btn btn-danger" id="clear-bets">
                        <span>🗑️ Limpar</span>
                    </button>
                </div>
            </div>
            
            <div class="results" id="results">
                <p class="result-text" id="result-text"></p>
                <p class="match-result" id="match-result"></p>
            </div>
            
            <div class="history">
                <h2 class="section-title">
                    <span>📜</span>
                    Histórico de Apostas
                </h2>
                <div id="history-items">
                    <div class="empty-message">Nenhuma aposta registrada ainda</div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="add-funds-modal">
        <div class="modal-content">
            <h3 class="modal-title">Adicionar Saldo</h3>
            <input type="number" id="funds-amount" class="modal-input" placeholder="Valor em R$" min="1">
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-secondary" id="cancel-add-funds">Cancelar</button>
                <button class="modal-btn modal-btn-primary" id="confirm-add-funds">Confirmar</button>
            </div>
        </div>
    </div>

    <script>
        let balance = 200.00;
        let currentBets = [];
        let betHistory = [];
        let selectedColor = '#ff6b6b';
        let currentBetType = 'result';
        
        const brazilianTeams = [
            "Flamengo", "Palmeiras", "Santos", "Corinthians", "São Paulo",
            "Grêmio", "Internacional", "Atlético-MG", "Cruzeiro", "Fluminense",
            "Vasco", "Botafogo", "Bahia", "Sport", "Fortaleza", "Athletico-PR",
            "Ceará", "Goiás", "Coritiba", "Bragantino", "Atlético-GO", "Chapecoense"
        ];
        
        const foreignTeams = [
            "Barcelona", "Real Madrid", "Liverpool", "Manchester City", "PSG",
            "Bayern Munich", "Juventus", "Milan", "Inter", "Chelsea", "Arsenal",
            "Tottenham", "Manchester Utd", "Dortmund", "Ajax", "Benfica", "Porto"
        ];
        
        document.addEventListener('DOMContentLoaded', function() {
            generateMatches();
            updateBalance();

            document.getElementById('place-bet').addEventListener('click', placeBet);
            document.getElementById('clear-bets').addEventListener('click', clearBets);
            document.getElementById('add-funds-btn').addEventListener('click', showAddFundsModal);
            document.getElementById('cancel-add-funds').addEventListener('click', hideAddFundsModal);
            document.getElementById('confirm-add-funds').addEventListener('click', addFunds);
            
            document.querySelectorAll('.color-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.color-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    selectedColor = this.getAttribute('data-color');
                    updateOddsColors();
                });
            });
            
            document.querySelectorAll('.bet-type-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.bet-type-btn').forEach(b => {
                        b.classList.remove('active');
                    });
                    this.classList.add('active');
                    currentBetType = this.getAttribute('data-type');
                    generateMatches();
                });
            });
        });
        
        function generateMatches() {
            const matchesContainer = document.getElementById('matches-container');
            matchesContainer.innerHTML = '';
            
            for (let i = 0; i < 6; i++) {
                let team1, team2;
                
                const isBrazilianMatch = Math.random() < 0.5;
                
                if (isBrazilianMatch) {

                    do {
                        team1 = brazilianTeams[Math.floor(Math.random() * brazilianTeams.length)];
                        team2 = brazilianTeams[Math.floor(Math.random() * brazilianTeams.length)];
                    } while (team1 === team2);
                } else {
                    
                    do {
                        team1 = foreignTeams[Math.floor(Math.random() * foreignTeams.length)];
                        team2 = foreignTeams[Math.floor(Math.random() * foreignTeams.length)];
                    } while (team1 === team2);
                }
                
                
                let odds;
                if (currentBetType === 'result') {
                    
                    odds = {
                        home: (Math.random() * 2.5 + 1.5).toFixed(2),
                        draw: (Math.random() * 2.0 + 2.5).toFixed(2),
                        away: (Math.random() * 2.5 + 1.5).toFixed(2)
                    };
                } else if (currentBetType === 'goals') {
                    
                    odds = {
                        under: (Math.random() * 1.5 + 1.8).toFixed(2),
                        medium: (Math.random() * 1.5 + 2.0).toFixed(2),
                        over: (Math.random() * 2.0 + 2.5).toFixed(2)
                    };
                } else if (currentBetType === 'cards') {
                    
                    odds = {
                        under: (Math.random() * 1.5 + 1.8).toFixed(2),
                        medium: (Math.random() * 1.5 + 2.0).toFixed(2),
                        over: (Math.random() * 2.0 + 2.5).toFixed(2)
                    };
                } else if (currentBetType === 'handicap') {
                    
                    odds = {
                        home: (Math.random() * 2.0 + 1.8).toFixed(2),
                        even: (Math.random() * 1.5 + 2.5).toFixed(2),
                        away: (Math.random() * 2.0 + 1.8).toFixed(2)
                    };
                }
                
                const matchElement = document.createElement('div');
                matchElement.className = 'match-card';
                
                if (currentBetType === 'result') {
                    matchElement.innerHTML = `
                        <div class="match-teams">
                            <div class="team-name">${team1}</div>
                            <div class="vs">VS</div>
                            <div class="team-name">${team2}</div>
                        </div>
                        <div class="match-odds">
                            <div class="odd" data-match="${team1} vs ${team2}" data-bet="1" data-odd="${odds.home}">
                                <div class="odd-value">${odds.home}</div>
                                <div class="odd-type">${team1}</div>
                            </div>
                            <div class="odd" data-match="${team1} vs ${team2}" data-bet="X" data-odd="${odds.draw}">
                                <div class="odd-value">${odds.draw}</div>
                                <div class="odd-type">Empate</div>
                            </div>
                            <div class="odd" data-match="${team1} vs ${team2}" data-bet="2" data-odd="${odds.away}">
                                <div class="odd-value">${odds.away}</div>
                                <div class="odd-type">${team2}</div>
                            </div>
                        </div>
                    `;
                } else if (currentBetType === 'goals') {
                    matchElement.innerHTML = `
                        <div class="match-teams">
                            <div class="team-name">${team1}</div>
                            <div class="vs">VS</div>
                            <div class="team-name">${team2}</div>
                        </div>
                        <div class="match-odds">
                            <div class="odd" data-match="${team1} vs ${team2}" data-bet="0-1" data-odd="${odds.under}">
                                <div class="odd-value">${odds.under}</div>
                                <div class="odd-type">0-1 Gols</div>
                            </div>
                            <div class="odd" data-match="${team1} vs ${team2}" data-bet="2-3" data-odd="${odds.medium}">
                                <div class="odd-value">${odds.medium}</div>
                                <div class="odd-type">2-3 Gols</div>
                            </div>
                            <div class="odd" data-match="${team1} vs ${team2}" data-bet="4+" data-odd="${odds.over}">
                                <div class="odd-value">${odds.over}</div>
                                <div class="odd-type">4+ Gols</div>
                            </div>
                        </div>
                    `;
                } else if (currentBetType === 'cards') {
                    matchElement.innerHTML = `
                        <div class="match-teams">
                            <div class="team-name">${team1}</div>
                            <div class="vs">VS</div>
                            <div class="team-name">${team2}</div>
                        </div>
                        <div class="match-odds">
                            <div class="odd" data-match="${team1} vs ${team2}" data-bet="0-2" data-odd="${odds.under}">
                                <div class="odd-value">${odds.under}</div>
                                <div class="odd-type">0-2 Cartões</div>
                            </div>
                            <div class="odd" data-match="${team1} vs ${team2}" data-bet="3-4" data-odd="${odds.medium}">
                                <div class="odd-value">${odds.medium}</div>
                                <div class="odd-type">3-4 Cartões</div>
                            </div>
                            <div class="odd" data-match="${team1} vs ${team2}" data-bet="5+" data-odd="${odds.over}">
                                <div class="odd-value">${odds.over}</div>
                                <div class="odd-type">5+ Cartões</div>
                            </div>
                        </div>
                    `;
                } else if (currentBetType === 'handicap') {
                    matchElement.innerHTML = `
                        <div class="match-teams">
                            <div class="team-name">${team1}</div>
                            <div class="vs">VS</div>
                            <div class="team-name">${team2}</div>
                        </div>
                        <div class="match-odds">
                            <div class="odd" data-match="${team1} vs ${team2}" data-bet="-1" data-odd="${odds.home}">
                                <div class="odd-value">${odds.home}</div>
                                <div class="odd-type">${team1} -1</div>
                            </div>
                            <div class="odd" data-match="${team1} vs ${team2}" data-bet="0" data-odd="${odds.even}">
                                <div class="odd-value">${odds.even}</div>
                                <div class="odd-type">Empate</div>
                            </div>
                            <div class="odd" data-match="${team1} vs ${team2}" data-bet="+1" data-odd="${odds.away}">
                                <div class="odd-value">${odds.away}</div>
                                <div class="odd-type">${team2} +1</div>
                            </div>
                        </div>
                    `;
                }
                
                matchesContainer.appendChild(matchElement);
            }
            
            document.querySelectorAll('.odd').forEach(odd => {
                odd.addEventListener('click', function() {
                    const match = this.getAttribute('data-match');
                    const bet = this.getAttribute('data-bet');
                    const oddValue = parseFloat(this.getAttribute('data-odd'));
                    
                    addToBetSlip(match, bet, oddValue);
                    
                    this.classList.add('selected');
                });
            });
            
            updateOddsColors();
        }
        
        function updateOddsColors() {
            document.querySelectorAll('.odd').forEach(odd => {
                if (odd.classList.contains('selected')) {
                    odd.style.background = selectedColor;
                }
            });
        }
        
        function addToBetSlip(match, bet, odd) {
            const existingBet = currentBets.find(b => b.match === match && b.bet === bet);
            
            if (existingBet) {
                showToast('Você já selecionou essa aposta!', 'warning');
                return;
            }
            currentBets.push({ match, bet, odd, type: currentBetType });
            updateBetSlip();
            showToast('Aposta adicionada ao cupom!', 'success');
        }
        
        function updateBetSlip() {
            const betItemsContainer = document.getElementById('bet-items');
            
            if (currentBets.length === 0) {
                betItemsContainer.innerHTML = '<div class="empty-message">Selecione suas apostas acima</div>';
                return;
            }
            
            betItemsContainer.innerHTML = '';
            currentBets.forEach((bet, index) => {
                const betItem = document.createElement('div');
                betItem.className = 'bet-item';
                
                let betDescription = '';
                if (bet.type === 'result') {
                    if (bet.bet === '1') {
                        betDescription = `Vitória do ${bet.match.split(' vs ')[0]}`;
                    } else if (bet.bet === 'X') {
                        betDescription = `Empate`;
                    } else if (bet.bet === '2') {
                        betDescription = `Vitória do ${bet.match.split(' vs ')[1]}`;
                    }
                } else if (bet.type === 'goals') {
                    betDescription = `Total de Gols: ${bet.bet}`;
                } else if (bet.type === 'cards') {
                    betDescription = `Cartões Amarelos: ${bet.bet}`;
                } else if (bet.type === 'handicap') {
                    if (bet.bet === '-1') {
                        betDescription = `${bet.match.split(' vs ')[0]} -1`;
                    } else if (bet.bet === '0') {
                        betDescription = `Empate (Handicap)`;
                    } else if (bet.bet === '+1') {
                        betDescription = `${bet.match.split(' vs ')[1]} +1`;
                    }
                }
                
                betItem.innerHTML = `
                    <div>
                        <span class="bet-match">${bet.match}</span>
                        <span class="bet-odd">${betDescription} (${bet.odd})</span>
                    </div>
                    <div class="remove-bet" onclick="removeBet(${index})">✖</div>
                `;
                betItemsContainer.appendChild(betItem);
            });
        }
        
        function removeBet(index) {
            const removedBet = currentBets[index];
            document.querySelectorAll('.odd').forEach(odd => {
                if (odd.getAttribute('data-match') === removedBet.match && 
                    odd.getAttribute('data-bet') === removedBet.bet) {
                    odd.classList.remove('selected');
                }
            });
            
            currentBets.splice(index, 1);
            updateBetSlip();
            showToast('Aposta removida!', 'info');
        }
        
        function clearBets() {
            if (currentBets.length === 0) return;
            
            document.querySelectorAll('.odd').forEach(odd => {
                odd.classList.remove('selected');
            });
            
            currentBets = [];
            updateBetSlip();
            showToast('Cupom limpo com sucesso!', 'info');
        }
        
        function placeBet() {
            const betAmountInput = document.getElementById('bet-amount');
            const betAmount = parseFloat(betAmountInput.value);
            
            if (currentBets.length === 0) {
                showToast('Selecione pelo menos uma aposta!', 'warning');
                return;
            }
            
            if (isNaN(betAmount) || betAmount <= 0) {
                showToast('Insira um valor válido para a aposta!', 'warning');
                return;
            }
            
            if (betAmount > balance) {
                showToast('Saldo insuficiente para essa aposta!', 'danger');
                return;
            }

            balance -= betAmount;
            updateBalance();
            
            const results = simulateResults();
            
            let totalWin = 0;
            let wonAny = false;
            let resultDetails = [];
            
            currentBets.forEach(bet => {
                const resultForBet = results.find(r => r.match === bet.match);
                if (resultForBet) {
                    let won = false;
                    
                    if (bet.type === 'result') {
                        won = resultForBet.result === bet.bet;
                    } else if (bet.type === 'goals') {
                        const goals = resultForBet.goals;
                        if (bet.bet === '0-1') won = goals <= 1;
                        else if (bet.bet === '2-3') won = goals >= 2 && goals <= 3;
                        else if (bet.bet === '4+') won = goals >= 4;
                    } else if (bet.type === 'cards') {
                        const cards = resultForBet.cards;
                        if (bet.bet === '0-2') won = cards <= 2;
                        else if (bet.bet === '3-4') won = cards >= 3 && cards <= 4;
                        else if (bet.bet === '5+') won = cards >= 5;
                    } else if (bet.type === 'handicap') {
                        const handicapResult = calculateHandicap(resultForBet.homeGoals, resultForBet.awayGoals, bet.bet);
                        won = handicapResult === 'win';
                    }
                    
                    if (won) {
                        totalWin += betAmount * bet.odd;
                        wonAny = true;
                    }
                    
                    resultDetails.push({
                        match: bet.match,
                        bet: bet,
                        result: resultForBet,
                        won: won
                    });
                }
            });
            
            const historyItem = {
                bets: [...currentBets],
                amount: betAmount,
                win: totalWin,
                won: wonAny,
                date: new Date().toLocaleString(),
                details: resultDetails
            };
            
            betHistory.unshift(historyItem);
            updateHistory();

            showResult(wonAny, totalWin, resultDetails);

            clearBets();
            betAmountInput.value = '';

            setTimeout(generateMatches, 2000);
        }

        function calculateHandicap(homeGoals, awayGoals, handicap) {
            let adjustedHome = homeGoals;
            let adjustedAway = awayGoals;
            
            if (handicap === '-1') {
                adjustedHome -= 1;
            } else if (handicap === '+1') {
                adjustedAway -= 1;
            }
            
            if (adjustedHome > adjustedAway) return 'win';
            if (adjustedHome === adjustedAway) return 'push';
            return 'loss';
        }

        function simulateResults() {
            const results = [];
            const allMatches = [...new Set(currentBets.map(bet => bet.match))];
            
            allMatches.forEach(match => {
                const teams = match.split(' vs ');
                const isBrazilian = brazilianTeams.includes(teams[0]);

                let homeGoals, awayGoals;
                
                if (isBrazilian) {
                    homeGoals = Math.floor(Math.random() * 3);
                    awayGoals = Math.floor(Math.random() * 3);
                } else {
                    homeGoals = Math.floor(Math.random() * 4);
                    awayGoals = Math.floor(Math.random() * 4);
                }
                
                let result;
                if (homeGoals > awayGoals) result = '1';
                else if (awayGoals > homeGoals) result = '2';
                else result = 'X';
                
                const yellowCards = Math.floor(Math.random() * 7);
                
                results.push({
                    match,
                    result,
                    homeGoals,
                    awayGoals,
                    goals: homeGoals + awayGoals,
                    cards: yellowCards
                });
            });
            
            return results;
        }
        
        function showResult(won, amount, details) {
            const resultsDiv = document.getElementById('results');
            const resultText = document.getElementById('result-text');
            const matchResult = document.getElementById('match-result');
            
            if (won) {
                resultsDiv.className = 'results win-result';
                balance += amount;
                updateBalance();
                resultText.innerHTML = `🎉 PARABÉNS! Você ganhou R$ ${amount.toFixed(2)}! 🎉`;
            } else {
                resultsDiv.className = 'results loss-result';
                resultText.textContent = '😢 Que pena! Você perdeu esta aposta. Tente novamente!';
            }
            
            let detailsHtml = '<div style="margin-top: 15px; font-size: 0.9rem;">';
            details.forEach(detail => {
                const team1 = detail.match.split(' vs ')[0];
                const team2 = detail.match.split(' vs ')[1];
                
                let betDescription = '';
                if (detail.bet.type === 'result') {
                    if (detail.bet.bet === '1') {
                        betDescription = `Apostou em ${team1}`;
                    } else if (detail.bet.bet === 'X') {
                        betDescription = `Apostou em Empate`;
                    } else if (detail.bet.bet === '2') {
                        betDescription = `Apostou em ${team2}`;
                    }
                } else if (detail.bet.type === 'goals') {
                    betDescription = `Apostou em ${detail.bet.bet} gols`;
                } else if (detail.bet.type === 'cards') {
                    betDescription = `Apostou em ${detail.bet.bet} cartões`;
                } else if (detail.bet.type === 'handicap') {
                    if (detail.bet.bet === '-1') {
                        betDescription = `Apostou em ${team1} -1`;
                    } else if (detail.bet.bet === '0') {
                        betDescription = `Apostou em Empate (Handicap)`;
                    } else if (detail.bet.bet === '+1') {
                        betDescription = `Apostou em ${team2} +1`;
                    }
                }
                
                let resultDescription = '';
                if (detail.bet.type === 'result') {
                    resultDescription = `Placar: ${detail.result.homeGoals}-${detail.result.awayGoals}`;
                } else if (detail.bet.type === 'goals') {
                    resultDescription = `Total de gols: ${detail.result.goals}`;
                } else if (detail.bet.type === 'cards') {
                    resultDescription = `Cartões amarelos: ${detail.result.cards}`;
                } else if (detail.bet.type === 'handicap') {
                    const handicapResult = calculateHandicap(detail.result.homeGoals, detail.result.awayGoals, detail.bet.bet);
                    resultDescription = `Placar: ${detail.result.homeGoals}-${detail.result.awayGoals} (${handicapResult === 'win' ? 'Ganhou' : handicapResult === 'push' ? 'Empate' : 'Perdeu'})`;
                }
                
                detailsHtml += `
                    <div style="margin-bottom: 8px; padding: 8px; background: rgba(0,0,0,0.05); border-radius: 5px;">
                        <strong>${detail.match}</strong><br>
                        ${betDescription}<br>
                        ${resultDescription}<br>
                        <span style="color: ${detail.won ? 'var(--success)' : 'var(--danger)'}; font-weight: 600;">
                            ${detail.won ? '✅ Ganhou' : '❌ Perdeu'}
                        </span>
                    </div>
                `;
            });
            detailsHtml += '</div>';
            
            matchResult.innerHTML = detailsHtml;
            resultsDiv.style.display = 'block';
            
            setTimeout(() => {
                resultsDiv.style.display = 'none';
            }, 10000);
        }
        
        function updateBalance() {
            document.getElementById('balance').textContent = `R$ ${balance.toFixed(2)}`;
            
            const balanceElement = document.querySelector('.balance');
            balanceElement.style.transform = 'scale(1.1)';
            setTimeout(() => {
                balanceElement.style.transform = 'scale(1)';
            }, 300);
        }
        
        function updateHistory() {
            const historyContainer = document.getElementById('history-items');
            
            if (betHistory.length === 0) {
                historyContainer.innerHTML = '<div class="empty-message">Nenhuma aposta registrada ainda</div>';
                return;
            }
            
            historyContainer.innerHTML = '';
            betHistory.forEach(item => {
                const historyElement = document.createElement('div');
                historyElement.className = 'history-item';
                
                const betsText = item.bets.map(bet => {
                    if (bet.type === 'result') {
                        if (bet.bet === '1') {
                            return `${bet.match.split(' vs ')[0]} (${bet.odd})`;
                        } else if (bet.bet === 'X') {
                            return `Empate (${bet.odd})`;
                        } else if (bet.bet === '2') {
                            return `${bet.match.split(' vs ')[1]} (${bet.odd})`;
                        }
                    } else if (bet.type === 'goals') {
                        return `Gols ${bet.bet} (${bet.odd})`;
                    } else if (bet.type === 'cards') {
                        return `Cartões ${bet.bet} (${bet.odd})`;
                    } else if (bet.type === 'handicap') {
                        if (bet.bet === '-1') {
                            return `${bet.match.split(' vs ')[0]} -1 (${bet.odd})`;
                        } else if (bet.bet === '0') {
                            return `Empate H (${bet.odd})`;
                        } else if (bet.bet === '+1') {
                            return `${bet.match.split(' vs ')[1]} +1 (${bet.odd})`;
                        }
                    }
                    return '';
                }).join(', ');
                
                historyElement.innerHTML = `
                    <div class="history-date">${item.date}</div>
                    <div class="history-bets"><strong>Aposta:</strong> ${betsText}</div>
                    <div class="history-amount">Valor: ${item.amount.toFixed(2)}</div>
                    <div class="${item.won ? 'history-win' : 'history-loss'}">
                        ${item.won ? item.win.toFixed(2) : 'Perdeu'}
                    </div>
                `;
                
                historyContainer.appendChild(historyElement);
            });
        }

        function showAddFundsModal() {
            document.getElementById('add-funds-modal').style.display = 'flex';
            document.getElementById('funds-amount').focus();
        }
        
        function hideAddFundsModal() {
            document.getElementById('add-funds-modal').style.display = 'none';
            document.getElementById('funds-amount').value = '';
        }
        
        function addFunds() {
            const fundsInput = document.getElementById('funds-amount');
            const fundsAmount = parseFloat(fundsInput.value);
            
            if (isNaN(fundsAmount)) {
                showToast('Insira um valor válido!', 'warning');
                return;
            }
            
            if (fundsAmount <= 0) {
                showToast('O valor deve ser maior que zero!', 'warning');
                return;
            }
            
            balance += fundsAmount;
            updateBalance();
            hideAddFundsModal();
            showToast(`R$ ${fundsAmount.toFixed(2)} adicionados ao saldo!`, 'success');
        }
        
        function showToast(message, type) {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.add('show');
            }, 10);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>
